{% extends 'base.html' %}

{% block content %}
<div class="hotels">
    <div class="search-details">
        <input type="text" value="{{desc}}">
        <div>
            <input type="date" value="{{date}}" name="date" id="date">
            <!-- <span>{{date}}</span> -->
            <p>Check In</p>
            <input type="time" value="{{time}}" name="time" id="time">
            <!-- <span>{{time}}</span> -->
        </div>
    </div>
    <hr>
    {% if date == '' or date == 'None' or time == '' or time == 'None' or not date or not time %}<span style="color:red; padding:10px; font-weight:bold;">*Please Select Date and Time before Proceeding!</span>{% endif %}
    <h2> <b> {{hotels|length}} </b>Short Stay destination found in {{desc}}</h2>
    <div class="cards">
        {% for hotel in hotels %} 
        <a href="{% if date != '' and date != 'None' and time != '' and time != 'None' and date and time %} /hotel?id={{hotel.id}}&date={{date}}&time={{time}} {% endif %}" class="card">
            <div class="card-img" style="background: url({{hotel.poster.url}});"></div>
            <!-- <img src="{{hotel.poster.url}}" alt=""> -->
            <div class="card-details">
                <h2>{{hotel.hotel_name}}</h2>
                <span class="address">{{hotel.address}}</span>
                <div><svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 30 35">
                        <path
                            d="M36.5 25.5v-3H44v3ZM39 40l-6.05-4.5 1.8-2.4 6.05 4.5Zm-4.1-25.15-1.8-2.4L39 8l1.8 2.4ZM10.5 38v-8H7q-1.25 0-2.125-.875T4 27v-6q0-1.25.875-2.125T7 18h9l10-6v24l-10-6h-2.5v8ZM15 24Zm13 6.7V17.3q1.35 1.2 2.175 2.925Q31 21.95 31 24t-.825 3.775Q29.35 29.5 28 30.7ZM7 21v6h9.8l6.2 3.7V17.3L16.8 21Z" />
                    </svg><span style="color:rgb(239, 5, 157); font-weight: bold;margin-left: 10px;">Lowest price guranteed</span>
                </div>
                <div class="price"><span style="margin-right:10px;">₹149/hour</span><strike>₹500</strike></div>
            </div>
        </a>
        {% endfor %}
        
    </div>

    <div class="large-cards">
        {% for hotel in hotels %} 
        <a href="{% if date != '' and date != 'None' and time != '' and time != 'None' and date and time %} /hotel?id={{hotel.id}}&date={{date}}&time={{time}} {% endif %}" class="large-card">
            <div class="large-card-img" style="background: url({{hotel.poster.url}});"></div>
            <!-- <img src="{{hotel.poster.url}}" alt=""> -->
            <div class="large-card-details">
                <h2>{{hotel.hotel_name}}</h2>
                <span class="">{{hotel.address}}</span>
                <span class="rating">4.0 Ratings</span>
                <div><span style="color:rgb(239, 5, 157); font-weight: bold;margin-left: 10px;">Lowest price guranteed</span>
                </div>
                <div class=""><span style="font-size: 20px; font-weight:bold;">₹149/hour</span></div>
            </div>
        </a>
        {% endfor %}
        
    </div>
</div>
<script>
    cards = document.getElementsByClassName("card");
    document.getElementById('date').addEventListener("input", ()=>{
        location.href = `/hotels?designation={{desc}}&date=${document.getElementById('date').value}&time={{time}}`
        // for(let i = 0; i<cards.length; i++){
        //     console.log(cards[i].href)
        // cards[i].href = `/hotel?id={{hotel.id}}&date=${document.getElementById('date').value}&time={{time}}`
        
    // }
    })
    document.getElementById('time').addEventListener("input", ()=>{
        location.href = `/hotels?designation={{desc}}&date={{date}}&time=${document.getElementById('time').value}`
    //     for(let i = 0; i<cards.length; i++){
    //     cards[i].href = `/hotel?id={{hotel.id}}&date={{date}}&time=${document.getElementById('time').value}`
    // }
    })
    
</script>
{% endblock content %}